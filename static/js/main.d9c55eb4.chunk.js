(this["webpackJsonpvideo-store-consumer"]=this["webpackJsonpvideo-store-consumer"]||[]).push([[0],{50:function(e,t,c){},69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},82:function(e,t,c){"use strict";c.r(t);var n=c(1),i=c(0),s=c(18),r=c.n(s),a=(c(50),c(8)),l=c(21),o=c(5),d=c(12),j=c.n(d),b=(c(69),c(84)),h=function(e){return Object(n.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.resetCallback()},children:[Object(n.jsx)("label",{htmlFor:"header-search",children:Object(n.jsx)("span",{className:"visually-hidden",children:Object(n.jsx)("h2",{children:"Search Video Library"})})}),Object(n.jsx)("input",{value:e.searchQuery,onInput:function(t){return e.setSearchQuery(t.target.value)},type:"text",id:"api-search",placeholder:"Search Video Library",name:"s"}),Object(n.jsx)(b.a,{type:"submit",children:"Clear Search"})]})},u=c(25),O=(c(70),function(e){return Object(n.jsxs)("figure",{className:"video",children:[Object(n.jsx)("img",{src:e.imageUrl,alt:e.title}),Object(n.jsxs)("figcaption",{children:[e.title,Object(n.jsx)("br",{}),new Date(e.releaseDate).getFullYear(),Object(n.jsx)("br",{}),Object(n.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:function(t){t.preventDefault(),e.addVideoCallback({externalId:e.externalId,title:e.title,overview:e.overview,releaseDate:e.releaseDate,imageUrl:e.imageUrl,inventory:10})},children:"Add to Library"})]})]})}),x=(c(71),function(e){var t=Object(i.useState)([]),c=Object(a.a)(t,2),s=c[0],r=c[1],l=Object(i.useState)(null),o=Object(a.a)(l,2),d=o[0],b=o[1];Object(i.useEffect)((function(){if(""!==e.keyWord)j.a.get("".concat(e.url).concat(e.focus,"?query=").concat(e.keyWord)).then((function(t){var c=t.data;0!==c.length?(r(Object(u.a)(c)),b(null)):(b('Unable to find "'.concat(e.keyWord,'"')),r([]))})).catch((function(e){b(e.message)}));else r([]),b(null)}),[e.keyWord]);var h=function(t){j.a.post("".concat(e.url).concat(e.focus,"?external_id=").concat(t.externalId,"&release_date=").concat(t.releaseDate,"&image_url=").concat(t.imageUrl),t).then((function(e){b('"'.concat(t.title,'" is added'))})).catch((function(e){b('You already have "'.concat(t.title,'"'))}))},x=s.map((function(e){return Object(n.jsx)(O,{title:e.title,overview:e.overview,releaseDate:e.release_date,imageUrl:e.image_url,externalId:e.external_id,addVideoCallback:h})}));return Object(n.jsxs)("div",{"data-testid":e.keyWord,children:[Object(n.jsx)("h4",{className:d?d.includes("already")?"text-warning border border-warning":"text-success border border-success":"",children:d?"".concat(d):""}),Object(n.jsx)("div",{className:"list",children:x})]})}),m=function(e){var t=window.location.search,c=new URLSearchParams(t).get("s"),s=Object(i.useState)(c||""),r=Object(a.a)(s,2),l=r[0],o=r[1];return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("header",{children:Object(n.jsx)("h2",{className:"display-5 m-4 pb-5",children:"Search Video Library"})}),Object(n.jsx)(h,{searchQuery:l,setSearchQuery:o,resetCallback:function(){o("")}}),Object(n.jsx)(x,{keyWord:l,url:e.url,focus:e.focus})]})},v=c(85),f=function(e){return Object(n.jsxs)(v.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",size:"sm",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Title"}),Object(n.jsx)("th",{children:"Image"}),Object(n.jsx)("th",{children:"Overview"}),Object(n.jsx)("th",{children:"Release Date"}),Object(n.jsx)("th",{children:"Inventory"}),Object(n.jsx)("th",{children:"Available Inventory"})]})}),Object(n.jsx)("tbody",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.selectedVideo.title}),Object(n.jsx)("td",{children:Object(n.jsx)("img",{src:e.selectedVideo.image_url,alt:e.selectedVideo.title})}),Object(n.jsx)("td",{children:e.selectedVideo.overview}),Object(n.jsx)("td",{children:e.selectedVideo.release_date}),Object(n.jsx)("td",{children:e.selectedVideo.inventory}),Object(n.jsx)("td",{children:e.selectedVideo.available_inventory})]})})]})},p=function(e){var t=Object(i.useState)([]),c=Object(a.a)(t,2),s=c[0],r=c[1],l=Object(i.useState)(null),o=Object(a.a)(l,2),d=(o[0],o[1]);Object(i.useEffect)((function(){j.a.get(e.url).then((function(e){var t=e.data;r(t)})).catch((function(e){d(e.message)}))}),[]);var h=s.map((function(t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)(b.a,{className:"table-button",onClick:function(){return c=t.title,void j.a.get("".concat(e.url).concat(e.focus).concat(c)).then((function(t){var n=t.data;e.selectVideoCallback(n),d("Success! Selected ".concat(c))})).catch((function(e){d('Unable to select "'.concat(c,'"'))}));var c},children:"Select"})}),Object(n.jsx)("td",{children:t.id}),Object(n.jsx)("td",{children:t.title}),Object(n.jsx)("td",{children:t.overview}),Object(n.jsx)("td",{children:t.release_date})]},t.id)}));return Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{className:"display-5 m-4 pb-5",children:"Video Library"}),e.selectedVideo?Object(n.jsx)(f,{selectedVideo:e.selectedVideo}):"",Object(n.jsxs)(v.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Select"}),Object(n.jsx)("th",{children:"Video ID"}),Object(n.jsx)("th",{children:"Title"}),Object(n.jsx)("th",{children:"Overview"}),Object(n.jsx)("th",{children:"Release Date"})]})}),Object(n.jsx)("tbody",{children:h})]})]})},g=function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)(b.a,{onClick:function(t){t.preventDefault(),e.selectCustomerCallback({id:e.id})},children:"Select"})}),Object(n.jsx)("td",{children:e.id}),Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:e.accountCredit}),Object(n.jsx)("td",{children:e.videosCheckedOutCount}),Object(n.jsx)("td",{children:e.address}),Object(n.jsx)("td",{children:e.city}),Object(n.jsx)("td",{children:e.state}),Object(n.jsx)("td",{children:e.postalCode}),Object(n.jsx)("td",{children:e.phone}),Object(n.jsx)("td",{children:e.registeredAt})]})},k=function(e){var t=Object(i.useState)([]),c=Object(a.a)(t,2),s=c[0],r=c[1],l=Object(i.useState)(null),o=Object(a.a)(l,2),d=o[0],b=o[1];Object(i.useEffect)((function(){j.a.get("".concat(e.url).concat(e.focus)).then((function(e){var t=e.data;0!==t.length?r(Object(u.a)(t)):r(t)})).catch((function(e){b(e.message)}))}),[s]);var h=s.map((function(t){return Object(n.jsx)(g,{id:t.id,name:t.name,accountCredit:t.account_credit,videosCheckedOutCount:t.videos_checked_out_count,address:t.address,city:t.city,state:t.state,postalCode:t.postal_code,phone:t.phone,registeredAt:t.registered_at,selectCustomerCallback:e.selectCustomerCallback})}));return Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{className:"display-5 m-4 pb-5",children:"Customer List"}),Object(n.jsx)("div",{className:"validation-errors-display",children:Object(n.jsx)("h2",{className:"validation-errors-display__list",children:d?"".concat(d):""})}),Object(n.jsxs)(v.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Select"}),Object(n.jsx)("th",{children:"Id"}),Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Account Credit"}),Object(n.jsx)("th",{children:"# of Videos Out"}),Object(n.jsx)("th",{children:"Address"}),Object(n.jsx)("th",{children:"City"}),Object(n.jsx)("th",{children:"State"}),Object(n.jsx)("th",{children:"Postal Code"}),Object(n.jsx)("th",{children:"Phone #"}),Object(n.jsx)("th",{children:"Registered At"})]})}),Object(n.jsx)("tbody",{children:h})]})]})},y=c.p+"static/media/VHS.85e0ab7b.jpg",C=c.p+"static/media/popcorn.980aa763.png",w=c.p+"static/media/cow.3dc396f8.png",S=(c(72),function(e){return Object(n.jsx)("div",{children:Object(n.jsx)(b.a,{variant:"outline-info",onClick:function(t){t.preventDefault(),e.checkOutCallback({customer:e.customer,video:e.video,dueDate:new Date(new Date((new Date).setDate((new Date).getDate()+7)).toString().split("GMT")[0]+" UTC").toISOString().split(".")[0]})},disabled:!e.customer||!e.video,children:"Check Out"})})}),N=function(e){return Object(n.jsx)("div",{children:Object(n.jsx)(b.a,{variant:"outline-info",onClick:function(t){t.preventDefault(),e.checkInCallback({customer:e.customer,video:e.video,returned:!0})},disabled:!e.customer||!e.video,children:"Return"})})},V=c(86),D=c(87),_=c(20),L="https://moovie-store.herokuapp.com/",I=function(){var e=Object(i.useState)(null),t=Object(a.a)(e,2),c=t[0],s=t[1],r=Object(i.useState)(null),d=Object(a.a)(r,2),b=d[0],h=d[1],u=Object(i.useState)(null),O=Object(a.a)(u,2),x=O[0],v=O[1];return Object(n.jsx)(l.BrowserRouter,{children:Object(n.jsxs)("div",{className:"App",children:[Object(n.jsxs)("header",{className:"App-header",children:[Object(n.jsx)("img",{src:y,className:"App-logo",alt:"logo"}),Object(n.jsx)("h1",{className:"App-title",children:"\ud83d\udc2e The Moo-vie Shop! \ud83d\udc2e"})]}),Object(n.jsxs)(V.a,{bg:"dark",variant:"dark",children:[Object(n.jsxs)(D.a,{className:"mr-auto",children:[Object(n.jsx)(_.LinkContainer,{to:"/",children:Object(n.jsx)(D.a.Link,{children:"Home"})}),Object(n.jsx)(_.LinkContainer,{to:"/library",children:Object(n.jsx)(D.a.Link,{children:"Videos"})}),Object(n.jsx)(_.LinkContainer,{to:"/customers",children:Object(n.jsx)(D.a.Link,{children:"Customers"})}),Object(n.jsx)(_.LinkContainer,{to:"/search",children:Object(n.jsx)(D.a.Link,{children:"Search"})})]}),Object(n.jsx)("div",{class:"btn",children:Object(n.jsx)(S,{video:c,customer:b,checkOutCallback:function(e){j.a.post("".concat(L,"rentals/").concat(e.video.title,"/check-out?customer_id=").concat(e.customer,"&due_date=").concat(e.dueDate),e).then((function(t){v("Successufully checked out ".concat(e.video.title))})).catch((function(e){v("Checkout unsuccessful")})),s(null),h(null)}})}),Object(n.jsx)("div",{class:"btn",children:Object(n.jsx)(N,{video:c,customer:b,checkInCallback:function(e){j.a.post("".concat(L,"rentals/").concat(e.video.title,"/return?customer_id=").concat(e.customer,"&returned=true"),e).then((function(e){v("Return completed!")})).catch((function(t){v("Return unsuccessful: this customer didn't rent ".concat(e.video.title))})),s(null),h(null)}})})]}),Object(n.jsx)("div",{className:"text-lg-center",children:Object(n.jsx)("h4",{className:x?x.includes("completed")?"text-success border border-success":"text-danger border border-danger":"",children:x?"".concat(x):""})}),Object(n.jsx)("table",{className:"float-right text-left mt-4",children:Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:c?"selection":"no-selection",children:Object(n.jsx)("p",{children:c?"Video: ".concat(c.title):"Video not selected"})}),Object(n.jsx)("td",{className:"text-right",children:c?Object(n.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:function(){s(null)},children:"Deselect Video"}):Object(n.jsx)("button",{className:"btn btn-outline-primary btn-sm disabled",children:"Select a Video "})}),Object(n.jsx)("td",{className:"visually-hidden",children:"Video"})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:b?"selection":"no-selection",children:Object(n.jsx)("p",{children:b?"Customer ID: ".concat(b):"Customer not selected"})}),Object(n.jsx)("td",{className:"text-right",children:b?Object(n.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:function(){h(null)},children:"Deselect Customer"}):Object(n.jsx)("button",{className:"btn btn-outline-primary btn-sm disabled",children:"Select a Customer "})})]})]})}),Object(n.jsxs)(o.g,{children:[Object(n.jsx)(o.d,{path:"/search",component:m,children:Object(n.jsx)(m,{url:L,focus:"videos"})}),Object(n.jsx)(o.d,{path:"/library",component:p,children:Object(n.jsx)(p,{url:L,focus:"videos/",selectVideoCallback:function(e){s(e),v(null)},selectedVideo:c})}),Object(n.jsx)(o.d,{path:"/customers",component:k,children:Object(n.jsx)(k,{url:L,focus:"customers",selectCustomerCallback:function(e){h(e.id),v(null)}})}),Object(n.jsx)(o.d,{path:"/",children:Object(n.jsx)(A,{})})]})]})})};function A(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{src:C,alt:"movie snacks"}),Object(n.jsx)("img",{src:w,alt:"cow",className:"cow"})]})}var W=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(Object(n.jsx)(I,{}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/Moovie-store/index.html",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/Moovie-store/index.html","/service-worker.js");W?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):U(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):U(e)}))}}()}},[[82,1,2]]]);
//# sourceMappingURL=main.d9c55eb4.chunk.js.map